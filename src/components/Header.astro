---
import HeaderLink from "./HeaderLink.astro";
import { SITE_TITLE } from "../consts";
---

<header class="md:shadow-lg z-10">
  <div class="hidden md:flex w-full flex-row">
    <div class="flex-1 bg-primary-gray my-[-2px]"></div>
    <div class="w-full max-w-[1024px]">
      <svg class="w-full" viewBox="0 0 92 12">
        <defs>
          <mask id="sample" maskUnits="userSpaceOnUse">
            <rect width="400px" height="100px" fill="white"></rect>
            <text
              x="47"
              y="10"
              font-size="8.4"
              font-family="Times New Roman"
              text-anchor="middle">{SITE_TITLE}</text
            >
          </mask>
        </defs>
        <rect
          id="title-mask"
          fill="#eee"
          width="110%"
          height="110%"
          mask="url(#sample)"></rect>
      </svg>
    </div>
    <div class="flex-1 bg-primary-gray my-[-2px]"></div>
  </div>

  <nav class="bg-primary-gray min-h-[50px]">
    <div
      class="flex flex-wrap items-center justify-between md:justify-center px-5 w-full"
    >
      <h1
        style="font-family: 'Times New Roman'"
        class="md:hidden text-xl sm:text-3xl font-medium ml-0 text-primary-dark-blue"
      >
        <a href="/">{SITE_TITLE}</a>
      </h1>
      <button
        id="menu-button"
        type="button"
        class="mt-[4px] inline-flex items-center px-0 p-2 ml-3 text-sm focus:bg-transparent text-gray-500 md:hidden focus:outline-none focus:ring-2"
        aria-controls="navbar-default"
        aria-expanded="false"
      >
        <span class="sr-only">Menu öffnen</span>
        <div class="w-10 h-10">
          <svg
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
            ><path
              fill-rule="evenodd"
              d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
              clip-rule="evenodd"></path></svg
          >
        </div>
      </button>
      <div
        class="hidden w-full md:block md:w-auto mb-[-2px]"
        id="navbar-default"
      >
        <ul
          class="flex flex-col uppercase p-4 mt-4 md:flex-row mb-0 pb-4 md:space-x-8 md:mt-0 md:text-sm md:font-medium md:border-0"
        >
          <li class="mb-0 md:mb-0">
            <HeaderLink
              class="text-base font-medium min-w-[100px] md:mb-0 md:pb-4"
              href="/"
            >
              Über uns
            </HeaderLink>
          </li>
          <li class="mb-0 md:mb-0">
            <HeaderLink
              class="text-base font-medium min-w-[100px] md:mb-0 md:pb-4"
              href="/bilder"
            >
              Bilder
            </HeaderLink>
          </li>
          <li class="mb-0 md:mb-0">
            <HeaderLink
              class="text-base font-medium min-w-[100px] md:mb-0 md:pb-4"
              href="/musik"
            >
              Musik
            </HeaderLink>
          </li>
          <li class="mb-0 md:mb-0">
            <HeaderLink
              class="text-base font-medium min-w-[100px] md:mb-0 md:pb-4"
              href="/artikel"
            >
              Artikel
            </HeaderLink>
          </li>
          <li class="mb-0 md:mb-0">
            <HeaderLink
              class="text-base font-medium min-w-[100px] md:mb-0 md:pb-4"
              href="/termine"
            >
              Termine
            </HeaderLink>
          </li>
          <li class="mb-0 md:mb-0">
            <HeaderLink
              class="text-base font-medium min-w-[100px] md:mb-0 md:pb-4"
              href="/kontakt"
            >
              Kontakt
            </HeaderLink>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<style>
  svg {
    min-width: 50%;
    height: 100% !important;
    max-width: 100%;
    width: 100%;
  }

  rect#title-mask {
    fill: "red";
  }
</style>

<script is:inline>
  function toggle() {
    document.querySelector("#navbar-default").classList.toggle("hidden");
  }
  function initNav() {
    document.querySelector("#menu-button").removeEventListener("click", toggle);
    document.querySelector("#menu-button").addEventListener("click", toggle);
  }
  initNav();
  document.addEventListener("astro:after-swap", initNav, { once: false });
  document.addEventListener("astro:page-load", initNav, { once: false });
</script>
